<!DOCTYPE html>
<html>
<head>
    <title>Map Location Picker</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        #mapContainer {
            width: 100%;
            height: 400px;
            overflow: scroll; /* Enable scrolling within the container */
            position: relative;
        }

        #selectLocation {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: green; /* Change the button color */
            color: white; /* Change the text color */
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="mapContainer">
        <div id="map" style="width: 100%; height: 100%;"></div>
    </div>

    <button id="selectLocation">Select Location</button>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-draggable"></script>

    <script>
        var initialPinPosition = [15.3173, 75.7139]; // Initial pin position (Karnataka)
        var map;
        var marker;

        function initMap() {
            // Initialize the map
            map = L.map('map').setView(initialPinPosition, 7); // Centered on Karnataka, zoom level 7

            // Add a tile layer (you can replace this with your preferred tile layer)
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: 'Â© OpenStreetMap contributors'
            }).addTo(map);

            // Initialize the marker with the initial position at the center of the map
            marker = L.marker(initialPinPosition, { draggable: true }).addTo(map);

            // Use the Draggable library to enable smooth marker dragging
            new L.Draggable(marker._icon, marker).enable();

            // Event listener for button click
            document.getElementById('selectLocation').addEventListener('click', function () {
                if (marker) {
                    alert('Selected Latitude: ' + marker.getLatLng().lat + '\nSelected Longitude: ' + marker.getLatLng().lng);
                }
            });
        }

        // Initialize the map when the page loads
        window.onload = initMap;
    </script>
</body>
</html>
